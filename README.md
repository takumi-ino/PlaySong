# PlaySong

■ 制作人数

一人

■ 製作期間 


2023年7月中旬～10月上旬（約2か月半）


■ 言語

C++


■ ライブラリ

・Dxライブラリ（program/dxlib_ext)

・講師配布の専用ライブラリ（program/library)

（私が書いたコードは program/game の中にあります）

■ ゲームの説明

　このゲームは２Dの音楽ゲームです。
 
 ４つのレーンから流れるノーツを判定エリアに重なるタイミングに合わせてキー入力することで、そのタイミングの正確性を競います。


■ 操作方法

 ・決定　　　　　　Enterキー
 
 ・戻る　　　　　　Backキー
 
 ・プレイシーン　　D, F, J, K

■ 開発目的

　純粋に面白そうだと思ったのが一番の理由です。
 また、「音楽ゲームの制作経験がある人が少ない印象があったから」、「難しそうだがその分やりがいもありそうだと思ったから」という理由もあります。

■ 構成

　タイトル　⇒　プレイする曲と難易度を選択 ⇒ プレイ開始 ⇒ リザルト 

■ アピールポイント

1. 時間管理

　ゲームプレイ中は裏でタイマーが動いています。

　これによってプレイ中にポーズメニューを開いても、プレイ再開時には続きからプレイすることができます。
また、「一時停止」や「やり直し」なども時間管理によってポーズメニューから可能となっております。
ポーズメニューはPキーで開くことができます。


2. 画像に頼らない独自の演出

　世の中に存在する多くの音楽ゲームは、イラストや画像などのUIを巧みに用いて派手な演出を飾っています。

　ただ、「人によってはそれは見づらいと感じているのではないか？」
そう思った私は敢えてそれらを使わない演出ができないかと考え、
文字と図形のみで出来る完全集中型（競技用）音楽ゲームの開発をするに至りました。

■ 苦労した点

1. ノーツ管理

　ノーツをどのように実装すればよいか？という点に最初は悩みました。
各レーンのノーツを２次元配列にまとめて生成し、グループ分けをするという手法を最初は取っていたものの、
処理が複雑になってしまったため、各レーンごとにオブジェクト配列を用意し、それぞれ独立したものとして扱うアプローチに変更しました。


2. 時間管理

　プレイシーンのタイマーの実装も苦労した点の一つです。
特にライブラリには時間の一時停止という機能がないため、自前で関数を用意する必要がありました。
一時停止は、「ゲームスタート時点からの経過時間」に「一時停止開始からの計測時間」を加算し、
プレイ再開時にこの「一時停止開始からの計測時間」のみを引く、という仕組みになっています。

■ 課題点


1. ロングノーツの実装

　このゲームにはノーマルとロングで２種類のノーツが存在します。
ロングノーツは開始地点から終了地点に到達するまでボタンを押し続けるタイプのものになっていますが、現状では実装がまだ完了していません。

2. 難易度調整

　曲の選択後、続けて難易度を選択しますが、現状では難易度選択はただの演出になっており、どの難易度を選択してもゲーム自体に変化はありません。


3. 当たり判定

　流れるノーツの当たり判定は、最初は座標で判定していましたが、より正確な実装をするため時間での判定に変更しました。
しかし、現状ではノーツの流れるタイミングと入力すべきタイミングに大きなずれがあります。


4. スコア・ハイスコア機能

　当たり判定に付随して、スコアの加算も課題となっています。

■ 使用音源をお借りしたサイト一覧

・プレイリスト

サイト名：classix

https://classix.sitefactory.info/mp3classic/beethoven/3804.mp3

サイト名：音楽館 

https://ux.getuploader.com/kuran/download/6

サイト名：ボカロ館

https://ux.getuploader.com/musicworld/download/15

サイト名：nicozon

https://www.nicovideo.jp/watch/sm23727606


・ポーズ中BGM

サイト名：東方アレンジ倉庫「ajapaのBGM」

http://ajapabgm.html.xdomain.jp/wav/syoujo.mp3


・リザルトBGM

サイト名：音源堂さくら紅葉

https://music.yukizakura.net/free/kanata-s/024.html
